---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const posts = await getCollection('posts');
const sortedPosts = posts
  .filter(post => !post.data.draft)
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<Layout title="Thoughts">
  <h1>Thoughts</h1>
  
  <p>Random musings, technical notes, and half-formed ideas.</p>
  
  {sortedPosts.length === 0 ? (
    <p>No posts yet. Check back soon!</p>
  ) : (
    <ul class="post-list">
      {sortedPosts.map((post) => (
        <li>
          <div class="post-title">
            <a href={`/thoughts/${post.slug}`}>{post.data.title}</a>
          </div>
          <div class="post-date">
            {new Date(post.data.date).toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </div>
          {post.data.description && (
            <p>{post.data.description}</p>
          )}
        </li>
      ))}
    </ul>
  )}
</Layout>
